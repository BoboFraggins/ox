;; -*- mode: outline; outline-regexp: " *[-\+]"; indent-tabs-mode: nil -*-

^c^d hide subtree
^c^s show subtree


- TBDs
 - dump - free flag on error

- XSD
- DTD
 - add comments for each type

- plan
 - add options to dump
  - encoding
  - check on standalone/dtd
 - add default values
  - encoding
  - indent
  - with_dtd
  - circular
  - with_xml
  - with_instruct
  - mode
  - xsd_date
  - effort
 - instructions
  - move parsing of prolog options into callbacks
  - keep instruct and remove prolog callback


- metadata for encoding options
 - processing instructions
  - <?target data?>
   - goes before first element, either size of <?xml?>
   - <?ox mode='object' effort='strict' ?> optional
 - parse.c
  - change read_prolog read_instructions
   - grab chars until space
   - if xml then read_prolog
   - else pi->pcb->instruct
    - add instruct to ParseCallbacks
  - _ox_obj_callbacks
   - change callbacks if pi->mode is not set
    - pi->mode set from args
    - pi->effort override as well from file if not set explicitly
  - start with ox_auto_callbacks
   - switch to correct one (object) after reading instructions or element func is called
   - prolog should create doc object
    - if gen then use that object
    - if object then replace doc object
   - on instructions swap callbacks
   - on first non-instruction or prolog switch to generic
   
- add option for encoding
 - option to set the default for various options
 

xmllint --valid --noout --dtdvalid ../misc/ox.dtd --debug sample.xml

#rsync -vru --exclude ".*" --exclude "*~" --exclude "#*" --exclude misc --exclude "*.o" ~/code/ox/ ~/git/ox
rsync -vrI --exclude ".*" --exclude "*~" --exclude "#*" --exclude misc --exclude "*.o" ~/code/ox/ ~/git/ox
rsync -vrI --exclude ".*" --exclude "*~" --exclude "#*" --exclude misc --exclude "*.o" ~/git/ox/ ~/code/ox


- changes
 - fixed large string corruption issue
 - added reuse array to stop GC from reusing optimization global VALUEs
 - added option for xml encoding to dump
 - added default options
  - encoding
  - indent
  - dtd
  - circular
  - xml
  - instruct
